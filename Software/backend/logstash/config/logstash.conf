input {
  tcp {
    port => 5000
  }
}

## Add your filters / logstash plugins configuration here
input {
  rabbitmq {
    host => "rabbitmq"
    user => "sesiot"
    password => "XqNfBZDgWYVTNm67Bxk4HUt7GLkE5UmhUWzHsCMpT6N6IymUSXBWtc2V3hNR"
    # queue => "sensor"
    exchange => "data"
    exchange_type => "fanout"
    durable => true
    port => 5672

    id => "rabbitmyq_id"
    vhost => "/"
    # Create a new queue
    queue => "logstash"
    # Create a new exchange; point your application to publish here!
    exchange => "log_exchange"
    exchange_type => "direct"
    # Take a copy of all messages with the "app_version_queue" routing key from the new exchange
    key => "mqtt-subscription-Telegraf-Consumer-Dn7z1qos0"
    # No ack will boost your perf
    ack => false
  }
}

output {
  elasticsearch {
    hosts => "elasticsearch:9200"
    index => "sensor"
  }
}
